<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gt.examsystem.mapper.QuestionBankMapper">
    <!-- 解决表名与字段不匹配 -->

    <resultMap type="com.gt.examsystem.entity.QuestionBankInfo" id="resultMap">
        <id property="questionId" column="questionId"/>
        <result property="questionTitle" column="questionTitle"/>
        <result property="questionType" column="questionType"/>
        <result property="questionAnswer" column="questionAnswer"/>
        <result property="questionOptionA" column="questionOptionA"/>
        <result property="questionOptionB" column="questionOptionB"/>
        <result property="questionOptionC" column="questionOptionC"/>
        <result property="questionOptionD" column="questionOptionD"/>
        <result property="questionParse" column="questionParse"/>
    </resultMap>

    <insert id="addQuestion">
        INSERT INTO t_question_bank
        (
        questionType,questionTitle,questionAnswer
        ,questionOptionA,questionOptionB,questionOptionC,
        questionOptionD,questionParse
        )
        VALUES
        (
        #{reqAddQuestion.questionType, jdbcType=INTEGER },
        #{reqAddQuestion.questionTitle, jdbcType=VARCHAR },
        #{reqAddQuestion.questionAnswer, jdbcType=VARCHAR },
        #{reqAddQuestion.questionOptionA, jdbcType=VARCHAR },
        #{reqAddQuestion.questionOptionB, jdbcType=VARCHAR },
        #{reqAddQuestion.questionOptionC, jdbcType=VARCHAR },
        #{reqAddQuestion.questionOptionD, jdbcType=VARCHAR },
        #{reqAddQuestion.questionParse, jdbcType=VARCHAR }
        )
    </insert>

    <update id="updateQuestion">
        UPDATE t_question_bank
        SET
        questionType=#{reqUpdateQuestion.questionType, jdbcType=INTEGER },
        questionTitle=#{reqUpdateQuestion.questionTitle, jdbcType=VARCHAR },
        questionAnswer=#{reqUpdateQuestion.questionAnswer, jdbcType=VARCHAR },
        questionOptionA=#{reqUpdateQuestion.questionOptionA, jdbcType=VARCHAR },
        questionOptionB=#{reqUpdateQuestion.questionOptionB, jdbcType=VARCHAR },
        questionOptionC=#{reqUpdateQuestion.questionOptionC, jdbcType=VARCHAR },
        questionOptionD=#{reqUpdateQuestion.questionOptionD, jdbcType=VARCHAR },
        questionParse=#{reqUpdateQuestion.questionParse, jdbcType=VARCHAR }
        WHERE questionId = #{reqUpdateQuestion.questionId ,jdbcType=INTEGER }
    </update>

    <delete id="deleteQuestion">
        DELETE FROM t_question_bank
        WHERE questionId = #{questionId ,jdbcType=INTEGER }
    </delete>

    <select id="selectQuestion" resultMap="resultMap" resultType="com.gt.examsystem.entity.QuestionBankInfo">
        SELECT
        *
        FROM t_question_bank
        WHERE usable_state = 1
        <if test=" reqSelectQuestion.questionId != null and reqSelectQuestion.questionId != '' "> AND questionId =
            #{reqSelectQuestion.questionId , jdbcType = INTEGER }
        </if>
        <if test=" reqSelectQuestion.questionTitleLike != null and reqSelectQuestion.questionTitleLike != '' "> AND
            questionTitle LIKE
            '%'||'#{reqSelectQuestion.questionTitleLike , jdbcType = VARCHAR }'||'%'
        </if>
    </select>
</mapper>
